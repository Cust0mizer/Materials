Стек и куча и то и другое – это область оперативной памяти.

Для стека выделяется маленький объем памяти, а для кучи большой.

Стек до 1мб.

Стек используется для хранения переменных, для вызова методов и для выполнения операций над переменными.

Стек является динамической структурой данных и работает по системе LIFO – Last in First Out – Последний вошёл, первый вышел, можно представить как стакан, в который мы складываем шарики, и последний шарик всегда будет вверху и пока мы его не достанем, не сможем добраться до шариков ниже.

В стеке проще размещать данные и чистить его при необходимости.
![[Pasted image 20240620214654.png]]
Мы не сможем добраться до шаров ниже, до тех пор, пока не вытащим  верхние.

|           Что нужно знать?            |                            Значимые типы.                             |             Ссылочные типы.              |
|:-------------------------------------:|:---------------------------------------------------------------------:|:----------------------------------------:|
|            Где размещаются            |                                В стеке                                |                  В куче                  |
|             Как отличить              | Структуры, Enum, простые переменные, к примеру Int, float, bool, char |              Class, string               |
|     Когда перестают существовать?     |           Когда покидают контекст, в котором унаследованы.            | Когда объект подвергается сборке мусора. |
| Поведение при передаче и копировании. |        ==Передаются по значению, копируются реальные данные.==        |          ==Копируется ссылка.==          |
[[Пример копирования по ссылке и передачи по значению|Что значит передается по значению и ссылке?]]

Есть 3 вида кучи, SOH, LOH, POH,
1 –  Small object heap - Для маленьких объектов до 85кб,
2 – Large object heap - Для больших, более 85кб также в LOH не происходит дефрагментация памяти поэтому все большие файлы сразу попадают в сборщик мусора 3го уровня.
3 – Pineted object Heap - Добавилась совсем не давно с DotNet 5. Специальная куча для закреплённый объектов.

Размер кучи задается при запуске приложения и в отличии от кучи он ограничен лишь физически.

[[Сборщик мусора Garbage Collector]]
[[Стек как динамическая коллекция в шарпе]]
[[Ключевое слово Ref]]
[[Ключевое слово Out]]
[[Ключевое слово In]]